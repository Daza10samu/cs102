#! /bin/env python3

from map import file_reader, relax, solve


def test_file_reader():
    assert file_reader("1.map"), (
        [
            [0, 0, 0, 0, 0, 0, 0],
            [0, 1, 3, 0, 3, 2, 0],
            [0, 0, 3, 0, 3, 0, 0],
            [0, 3, 3, 0, 3, 3, 0],
            [0, 3, 0, 3, 0, 3, 0],
            [0, 3, 3, 3, 3, 3, 0],
            [0, 0, 0, 0, 0, 0, 0],
        ],
        (1, 1),
    )


def test_solve():
    assert solve(
        [
            [0, 0, 0, 0, 0, 0, 0],
            [0, 1, 3, 0, 3, 2, 0],
            [0, 0, 3, 0, 3, 0, 0],
            [0, 3, 3, 0, 3, 3, 0],
            [0, 3, 0, 3, 0, 3, 0],
            [0, 3, 3, 3, 3, 3, 0],
            [0, 0, 0, 0, 0, 0, 0],
        ],
        (1, 1),
    ) == (
        [
            [0, 0, 0, 0, 0, 0, 0],
            [0, 1, 3, 0, 3, 2, 0],
            [0, 0, 3, 0, 3, 0, 0],
            [0, 3, 3, 0, 3, 3, 0],
            [0, 3, 0, 3, 0, 3, 0],
            [0, 3, 3, 3, 3, 3, 0],
            [0, 0, 0, 0, 0, 0, 0],
        ],
        {
            (1, 1): (1, 1),
            (1, 2): (1, 1),
            (2, 2): (1, 2),
            (3, 2): (2, 2),
            (3, 1): (3, 2),
            (4, 1): (3, 1),
            (5, 1): (4, 1),
            (5, 2): (5, 1),
            (5, 3): (5, 2),
            (5, 4): (5, 3),
            (4, 3): (5, 3),
            (5, 5): (5, 4),
            (4, 5): (5, 5),
            (3, 5): (4, 5),
            (3, 4): (3, 5),
            (2, 4): (3, 4),
            (1, 4): (2, 4),
            (1, 5): (1, 4),
        },
        (1, 1),
        (1, 5),
    )


def test_relax():
    assert relax(
        [
            [0, 0, 0, 0, 0, 0, 0],
            [0, 1, 3, 0, 3, 2, 0],
            [0, 0, 3, 0, 3, 0, 0],
            [0, 3, 3, 0, 3, 3, 0],
            [0, 3, 0, 3, 0, 3, 0],
            [0, 3, 3, 3, 3, 3, 0],
            [0, 0, 0, 0, 0, 0, 0],
        ],
        {
            (1, 1): (1, 1),
            (1, 2): (1, 1),
            (2, 2): (1, 2),
            (3, 2): (2, 2),
            (3, 1): (3, 2),
            (4, 1): (3, 1),
            (5, 1): (4, 1),
            (5, 2): (5, 1),
            (5, 3): (5, 2),
            (5, 4): (5, 3),
            (4, 3): (5, 3),
            (5, 5): (5, 4),
            (4, 5): (5, 5),
            (3, 5): (4, 5),
            (3, 4): (3, 5),
            (2, 4): (3, 4),
            (1, 4): (2, 4),
            (1, 5): (1, 4),
        },
        (1, 1),
        (1, 5),
    ) == [
        [0, 0, 0, 0, 0, 0, 0],
        [0, 1, 1, 0, 1, 2, 0],
        [0, 0, 1, 0, 1, 0, 0],
        [0, 1, 1, 0, 1, 1, 0],
        [0, 1, 0, 3, 0, 1, 0],
        [0, 1, 1, 1, 1, 1, 0],
        [0, 0, 0, 0, 0, 0, 0],
    ]
